(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},34566,e=>{"use strict";let t=(0,e.i(75254).default)("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);e.s(["Sunrise",()=>t],34566)},10980,e=>{"use strict";let t=(0,e.i(75254).default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],10980)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},52786,e=>{"use strict";let t=(0,e.i(75254).default)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);e.s(["HardDrive",()=>t],52786)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},70738,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(40160);let o=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var s=e.i(27612),n=e.i(31278),i=e.i(52786),l=e.i(75581),d=e.i(27587);function c({contentId:e,contentType:c,contentTitle:h,contentData:y,onDownload:f,onDelete:g}){let{showToast:u}=(0,d.useToast)(),[p,x]=(0,a.useState)(!1),[k,m]=(0,a.useState)(!1),[w,v]=(0,a.useState)(""),[j,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{b(),S()},[e]);let b=async()=>{try{if(await l.offlineStorage.getContent(e)){x(!0),M(!1);return}if(!e.startsWith("all-")&&await l.offlineStorage.getContent(`all-${c}s`)){x(!0),M(!0);return}x(!1),M(!1)}catch(e){console.error("Error checking download status:",e)}},S=async()=>{try{let e=(await l.offlineStorage.getStorageSize()/1048576).toFixed(2);v(e)}catch(e){console.error("Error getting storage size:",e)}},C=async()=>{if(!("indexedDB"in window))return void u("Your browser does not support offline storage","error");m(!0);try{if(console.log("Starting download for:",e,h),e.startsWith("all-")){let t=await l.offlineStorage.deleteContentByPattern(c,[e]);t>0&&console.log(`Removed ${t} individual ${c}(s) before bulk download`)}await l.offlineStorage.saveContent({id:e,type:c,title:h,content:y,cachedAt:Date.now()}),console.log("Download complete for:",e),x(!0),M(!1),await S();let t=Array.isArray(y)?y.length:1;u(`${t} ${c}${t>1?"s":""} saved for offline viewing!`,"success"),f&&f()}catch(t){console.error("Error downloading content:",t);let e=t instanceof Error?t.message:"Unknown error";u(`Failed to download: ${e}`,"error")}finally{m(!1)}},A=async()=>{if(j)return void u(`This is part of "All ${c}s" download. Delete that to remove this.`,"info");m(!0);try{await l.offlineStorage.deleteContent(e),x(!1),M(!1),await S(),u("Offline content removed","info"),g&&g()}catch(e){console.error("Error deleting content:",e),u("Failed to remove offline content","error")}finally{m(!1)}};return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[p?(0,t.jsx)("button",{onClick:A,disabled:k,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",title:j?`Part of "All ${c}s" download`:"Click to remove",children:k?(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:j?"Downloaded (All)":"Downloaded"}),(0,t.jsx)(s.Trash2,{className:"w-4 h-4 ml-2 opacity-70"})]})}):(0,t.jsx)("button",{onClick:C,disabled:k,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50",children:k?(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Download,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Download for Offline"})]})}),w&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsx)(i.HardDrive,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[w," MB"]})]})]})}e.s(["default",()=>c],70738)}]);